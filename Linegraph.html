<!DOCTYPE html>
<html>
<head>
    <title>Weekly Death Counts by Country</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        .line { fill: none; stroke-width: 1.5px; }
        .axis path, .axis line { fill: none; stroke: black; shape-rendering: crispEdges; }
    </style>
</head>
<body>
    <svg width="960" height="500"></svg>
    <script>
        const data = [
    {week: 1, Australia: 3489, Austria: 2365, Canada: 7170, Denmark: 1364, France: 15768, Greece: 3018, Iceland: 67, NewZealand: 755, UnitedKingdom: 16993, UnitedStates: 69134},
    {week: 2, Australia: 3282, Austria: 2123, Canada: 7120, Denmark: 1297, France: 14414, Greece: 3080, Iceland: 55, NewZealand: 669, UnitedKingdom: 19948, UnitedStates: 66490},
    {week: 3, Australia: 3323, Austria: 1842, Canada: 6925, Denmark: 1186, France: 13827, Greece: 2957, Iceland: 56, NewZealand: 725, UnitedKingdom: 17946, UnitedStates: 64321},
    {week: 4, Australia: 3214, Austria: 1775, Canada: 6670, Denmark: 1146, France: 13613, Greece: 2847, Iceland: 62, NewZealand: 697, UnitedKingdom: 15970, UnitedStates: 62537},
    {week: 5, Australia: 3363, Austria: 1772, Canada: 6590, Denmark: 1169, France: 13250, Greece: 2797, Iceland: 45, NewZealand: 638, UnitedKingdom: 15131, UnitedStates: 62865},
    {week: 6, Australia: 3200, Austria: 1682, Canada: 6780, Denmark: 1122, France: 13186, Greece: 2858, Iceland: 60, NewZealand: 634, UnitedKingdom: 14339, UnitedStates: 62949},
    {week: 7, Australia: 3289, Austria: 1771, Canada: 6540, Denmark: 1150, France: 12979, Greece: 2884, Iceland: 50, NewZealand: 695, UnitedKingdom: 13722, UnitedStates: 61861},
    {week: 8, Australia: 3230, Austria: 1874, Canada: 6385, Denmark: 1180, France: 12781, Greece: 2742, Iceland: 48, NewZealand: 681, UnitedKingdom: 13608, UnitedStates: 62131},
    {week: 9, Australia: 3291, Austria: 1852, Canada: 6640, Denmark: 1123, France: 12772, Greece: 2698, Iceland: 50, NewZealand: 679, UnitedKingdom: 13613, UnitedStates: 61419},
    {week: 10, Australia: 3366, Austria: 1849, Canada: 6475, Denmark: 1199, France: 12975, Greece: 2525, Iceland: 43, NewZealand: 685, UnitedKingdom: 13048, UnitedStates: 60801},
    {week: 11, Australia: 3402, Austria: 1813, Canada: 6505, Denmark: 1174, France: 12587, Greece: 2363, Iceland: 55, NewZealand: 641, UnitedKingdom: 13683, UnitedStates: 61132},
    {week: 12, Australia: 3318, Austria: 1758, Canada: 6405, Denmark: 1135, France: 11971, Greece: 2428, Iceland: 39, NewZealand: 672, UnitedKingdom: 13794, UnitedStates: 60800},
    {week: 13, Australia: 3293, Austria: 1695, Canada: 6410, Denmark: 1105, France: 11876, Greece: 2444, Iceland: 48, NewZealand: 705, UnitedKingdom: 13153, UnitedStates: 60195},
    {week: 14, Australia: 3266, Austria: 1693, Canada: 6255, Denmark: 1166, France: 11909, Greece: 2274, Iceland: 41, NewZealand: 722, UnitedKingdom: 11554, UnitedStates: 59039},
    {week: 15, Australia: 3469, Austria: 1682, Canada: 6300, Denmark: 1130, France: 11981, Greece: 2359, Iceland: 44, NewZealand: 678, UnitedKingdom: 11490, UnitedStates: 59651},
    {week: 16, Australia: 3523, Austria: 1731, Canada: 6220, Denmark: 1139, France: 12181, Greece: 2365, Iceland: 34, NewZealand: 740, UnitedKingdom: 14028, UnitedStates: 58433},
    {week: 17, Australia: 3493, Austria: 1643, Canada: 6360, Denmark: 1114, France: 12072, Greece: 2366, Iceland: 56, NewZealand: 656, UnitedKingdom: 13696, UnitedStates: 57761},
    {week: 18, Australia: 3521, Austria: 1588, Canada: 6170, Denmark: 1094, France: 11692, Greece: 2371, Iceland: 35, NewZealand: 662, UnitedKingdom: 11607, UnitedStates: 58007},
    {week: 19, Australia: 3761, Austria: 1619, Canada: 6180, Denmark: 1140, France: 11254, Greece: 2250, Iceland: 42, NewZealand: 718, UnitedKingdom: 11806, UnitedStates: 57796},
    {week: 20, Australia: 3796, Austria: 1527, Canada: 5895, Denmark: 1053, France: 11309, Greece: 2230, Iceland: 50, NewZealand: 752, UnitedKingdom: 13190, UnitedStates: 56617}
];


        const svg = d3.select("svg"),
            margin = {top: 20, right: 80, bottom: 30, left: 50},
            width = svg.attr("width") - margin.left - margin.right,
            height = svg.attr("height") - margin.top - margin.bottom,
            g = svg.append("g").attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3.scaleLinear().domain([1, 20]).range([0, width]),
            y = d3.scaleLinear().domain([0, d3.max(data, d => Math.max(d.Australia, d.Austria, d.Canada, d.Denmark, d.France, d.Greece, d.Iceland, d.NewZealand, d.UnitedKingdom, d.UnitedStates))]).range([height, 0]);

        const countries = ["Australia", "Austria", "Canada", "Denmark", "France", "Greece", "Iceland", "NewZealand", "UnitedKingdom", "UnitedStates"];
        const color = d3.scaleOrdinal(d3.schemeCategory10).domain(countries);

        g.append("g")
            .attr("transform", `translate(0,${height})`)
            .call(d3.axisBottom(x));

        g.append("g")
            .call(d3.axisLeft(y));

        countries.forEach(country => {
            const line = d3.line()
                .x(d => x(d.week))
                .y(d => y(d[country]));

            const path = g.append("path")
                .datum(data)
                .attr("class", "line")
                .attr("stroke", color(country))
                .attr("d", line);

            g.append("text")
                .attr("transform", function() {
                    const lastPoint = data[data.length - 1];
                    return `translate(${x(lastPoint.week)},${y(lastPoint[country])})`;
                })
                .attr("x", 3)  // Move the text from the exact end point a bit to the right
                .attr("dy", "0.35em")  // Center text vertically
                .style("font-size", "12px")
                .style("fill", color(country))
                .text(country);
        });
    </script>
</body>
</html>
